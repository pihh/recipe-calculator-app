{"version":3,"sources":["./src/app/pages/recipes/recipes.page.html","./src/app/pages/recipes/recipes-routing.module.ts","./src/app/pages/recipes/recipes.module.ts","./src/app/pages/recipes/recipes.page.scss","./src/app/pages/recipes/recipes.page.ts"],"names":[],"mappings":"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","file":"pages-recipes-recipes-module-es2015.js","sourcesContent":["export default \"<ion-header #header translucent=\\\"true\\\" class=\\\"ion-no-border\\\">\\n  <ion-toolbar>\\n    <ion-title> </ion-title>\\n\\n    <ion-buttons slot=\\\"secondary\\\">\\n      <ion-menu-button menu=\\\"home-menu\\\"></ion-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [scrollEvents]=\\\"true\\\" (ionScroll)=\\\"logScroll($event)\\\" (ionScrollStart)=\\\"scrollStart(header)\\\">\\n  <ion-header collapse=\\\"condense\\\" translucent=\\\"true\\\" class=\\\"ion-no-border\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\">Recipes</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  <ion-toolbar>\\n    <ion-searchbar [(ngModel)]=\\\"search\\\" (ionChange)=\\\"onInput($event)\\\"></ion-searchbar>\\n  </ion-toolbar>\\n\\n  <div *ngFor=\\\"let recipe of items\\\">\\n    <app-card-recipe [recipe]=\\\"recipe\\\"></app-card-recipe>\\n  </div>\\n\\n  <app-breathe-bottom></app-breathe-bottom>\\n  <ion-infinite-scroll threshold=\\\"50px\\\" (ionInfinite)=\\\"loadMore($event)\\\" loadingSpinner=\\\"bubbles\\\">\\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RecipesPage } from './recipes.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RecipesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RecipesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RecipesPageRoutingModule } from './recipes-routing.module';\n\nimport { RecipesPage } from './recipes.page';\nimport { ComponentsModule } from './../../components/components.module';\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RecipesPageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [RecipesPage]\n})\nexport class RecipesPageModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3JlY2lwZXMvcmVjaXBlcy5wYWdlLnNjc3MifQ== */\";","import { Component, Input, OnInit, Renderer2 } from '@angular/core';\nimport { RecipesModel } from \"src/app/models/recipes.model\";\nimport { DataV2Service } from './../../services/data-v2.service';\nconst LIMIT = 10;\n\n@Component({\n  selector: 'app-recipes',\n  templateUrl: './recipes.page.html',\n  styleUrls: ['./recipes.page.scss'],\n})\nexport class RecipesPage implements OnInit {\n\n  search: string = \"\";\n  constructor(public renderer: Renderer2, public recipeModel: RecipesModel, public dataService: DataV2Service) { }\n\n\n  ngOnInit() {\n    this.loadData();\n  }\n\n  @Input('header') header: any;\n  scrollStart(header) {\n    this.header = header.el\n  }\n\n  lastX: any;\n  logScroll(event) {\n    this.renderer.setStyle(this.header, 'transition', 'margin-top 400ms')\n    if (event.detail.scrollTop > Math.max(0, this.lastX)) {\n      // Hide\n      this.renderer.setStyle(this.header, 'margin-top', `-${this.header.clientHeight}px`)\n    } else {\n      // Show\n      this.renderer.setStyle(this.header, 'margin-top', '0px')\n    }\n\n    this.lastX = event.detail.scrollTop\n  }\n\n  page: number = 1;\n  items: any = [];\n\n  async loadData(infiniteScroll?) {\n    let skip = this.page\n\n    // const items = await this.recipeModel.get({ skip: skip, limit: LIMIT, search: this.search });\n    const items = await this.dataService.getRecipes({ skip: skip, limit: LIMIT, search: this.search });\n\n    if (skip === 1) {\n      this.items = items;\n    } else {\n      this.items = this.items.concat(items);\n    }\n\n    if (infiniteScroll) {\n      infiniteScroll.target.complete();\n      if (Array.isArray(items) && items.length < LIMIT) {\n        console.log({ infiniteScroll }, 'disable it')\n\n      }\n    }\n  }\n\n  async loadMore(infiniteScroll) {\n    this.page++;\n    await this.loadData(infiniteScroll);\n  }\n\n  onInput($event) {\n    this.page = 1;\n    this.loadData();\n  }\n}\n"],"sourceRoot":"webpack:///"}