{"version":3,"sources":["webpack:///src/app/pages/recipes/recipes.page.html","webpack:///src/app/pages/recipes/recipes-routing.module.ts","webpack:///src/app/pages/recipes/recipes.module.ts","webpack:///src/app/pages/recipes/recipes.page.scss","webpack:///src/app/pages/recipes/recipes.page.ts"],"names":["routes","path","component","RecipesPageRoutingModule","imports","forChild","exports","RecipesPageModule","declarations","LIMIT","RecipesPage","renderer","recipeModel","dataService","search","page","items","loadData","header","el","event","setStyle","detail","scrollTop","Math","max","lastX","clientHeight","infiniteScroll","skip","getRecipes","limit","concat","target","complete","Array","isArray","length","console","log","$event","selector","template"],"mappings":"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","file":"pages-recipes-recipes-module-es5.js","sourcesContent":["export default \"<ion-header #header translucent=\\\"true\\\" class=\\\"ion-no-border\\\">\\n  <ion-toolbar>\\n    <ion-title> </ion-title>\\n\\n    <ion-buttons slot=\\\"secondary\\\">\\n      <ion-menu-button menu=\\\"home-menu\\\"></ion-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [scrollEvents]=\\\"true\\\" (ionScroll)=\\\"logScroll($event)\\\" (ionScrollStart)=\\\"scrollStart(header)\\\">\\n  <ion-header collapse=\\\"condense\\\" translucent=\\\"true\\\" class=\\\"ion-no-border\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\">Recipes</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  <ion-toolbar>\\n    <ion-searchbar [(ngModel)]=\\\"search\\\" (ionChange)=\\\"onInput($event)\\\"></ion-searchbar>\\n  </ion-toolbar>\\n\\n  <div *ngFor=\\\"let recipe of items\\\">\\n    <app-card-recipe [recipe]=\\\"recipe\\\"></app-card-recipe>\\n  </div>\\n\\n  <app-breathe-bottom></app-breathe-bottom>\\n  <ion-infinite-scroll threshold=\\\"50px\\\" (ionInfinite)=\\\"loadMore($event)\\\" loadingSpinner=\\\"bubbles\\\">\\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RecipesPage } from './recipes.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RecipesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RecipesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RecipesPageRoutingModule } from './recipes-routing.module';\n\nimport { RecipesPage } from './recipes.page';\nimport { ComponentsModule } from './../../components/components.module';\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RecipesPageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [RecipesPage]\n})\nexport class RecipesPageModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3JlY2lwZXMvcmVjaXBlcy5wYWdlLnNjc3MifQ== */\";","import { Component, Input, OnInit, Renderer2 } from '@angular/core';\nimport { RecipesModel } from \"src/app/models/recipes.model\";\nimport { DataV2Service } from './../../services/data-v2.service';\nconst LIMIT = 10;\n\n@Component({\n  selector: 'app-recipes',\n  templateUrl: './recipes.page.html',\n  styleUrls: ['./recipes.page.scss'],\n})\nexport class RecipesPage implements OnInit {\n\n  search: string = \"\";\n  constructor(public renderer: Renderer2, public recipeModel: RecipesModel, public dataService: DataV2Service) { }\n\n\n  ngOnInit() {\n    this.loadData();\n  }\n\n  @Input('header') header: any;\n  scrollStart(header) {\n    this.header = header.el\n  }\n\n  lastX: any;\n  logScroll(event) {\n    this.renderer.setStyle(this.header, 'transition', 'margin-top 400ms')\n    if (event.detail.scrollTop > Math.max(0, this.lastX)) {\n      // Hide\n      this.renderer.setStyle(this.header, 'margin-top', `-${this.header.clientHeight}px`)\n    } else {\n      // Show\n      this.renderer.setStyle(this.header, 'margin-top', '0px')\n    }\n\n    this.lastX = event.detail.scrollTop\n  }\n\n  page: number = 1;\n  items: any = [];\n\n  async loadData(infiniteScroll?) {\n    let skip = this.page\n\n    // const items = await this.recipeModel.get({ skip: skip, limit: LIMIT, search: this.search });\n    const items = await this.dataService.getRecipes({ skip: skip, limit: LIMIT, search: this.search });\n\n    if (skip === 1) {\n      this.items = items;\n    } else {\n      this.items = this.items.concat(items);\n    }\n\n    if (infiniteScroll) {\n      infiniteScroll.target.complete();\n      if (Array.isArray(items) && items.length < LIMIT) {\n        console.log({ infiniteScroll }, 'disable it')\n\n      }\n    }\n  }\n\n  async loadMore(infiniteScroll) {\n    this.page++;\n    await this.loadData(infiniteScroll);\n  }\n\n  onInput($event) {\n    this.page = 1;\n    this.loadData();\n  }\n}\n"]}