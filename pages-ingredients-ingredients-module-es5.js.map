{"version":3,"sources":["webpack:///src/app/pages/ingredients/ingredients.page.html","webpack:///src/app/pages/ingredients/ingredients-routing.module.ts","webpack:///src/app/pages/ingredients/ingredients.module.ts","webpack:///src/app/pages/ingredients/ingredients.page.scss","webpack:///src/app/pages/ingredients/ingredients.page.ts"],"names":["routes","path","component","IngredientsPageRoutingModule","imports","forChild","exports","IngredientsPageModule","declarations","LIMIT","IngredientsPage","renderer","model","dataService","search","page","items","loadData","header","el","event","setStyle","detail","scrollTop","Math","max","lastX","clientHeight","infiniteScroll","console","log","skip","getIngredients","limit","trim","concat","target","complete","Array","isArray","length","$event","selector","template"],"mappings":"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","file":"pages-ingredients-ingredients-module-es5.js","sourcesContent":["export default \"<ion-header #header translucent=\\\"true\\\" class=\\\"ion-no-border\\\">\\n  <ion-toolbar>\\n    <ion-title> </ion-title>\\n\\n    <ion-buttons slot=\\\"secondary\\\">\\n      <ion-menu-button menu=\\\"home-menu\\\"></ion-menu-button>\\n\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [scrollEvents]=\\\"true\\\" (ionScroll)=\\\"logScroll($event)\\\" (ionScrollStart)=\\\"scrollStart(header)\\\">\\n  <ion-header collapse=\\\"condense\\\" translucent=\\\"true\\\" class=\\\"ion-no-border\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\">Ingredients</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  <ion-toolbar>\\n    <ion-searchbar [(ngModel)]=\\\"search\\\" (ionChange)=\\\"onInput($event)\\\"></ion-searchbar>\\n  </ion-toolbar>\\n\\n  <div class=\\\"ingredients-container\\\">\\n    <div *ngFor=\\\"let ingredient of items;  let index = index\\\" class=\\\"ingredient-container\\\">\\n      <app-card-ingredient [ingredient]=\\\"ingredient\\\" [odd]=\\\" 0 === index % 2\\\" [even]=\\\" 1 === index % 2\\\">\\n      </app-card-ingredient>\\n    </div>\\n  </div>\\n  <app-breathe-bottom></app-breathe-bottom>\\n  <ion-infinite-scroll threshold=\\\"50px\\\" (ionInfinite)=\\\"loadMore($event)\\\" loadingSpinner=\\\"bubbles\\\">\\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IngredientsPage } from './ingredients.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: IngredientsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class IngredientsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { IngredientsPageRoutingModule } from './ingredients-routing.module';\n\nimport { IngredientsPage } from './ingredients.page';\nimport { ComponentsModule } from './../../components/components.module';\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    IngredientsPageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [IngredientsPage]\n})\nexport class IngredientsPageModule { }\n","export default \".ingredient-container {\\n  width: 50vw;\\n  display: inline-block;\\n}\\n\\n.ingredient-container ion-card {\\n  margin-bottom: 0px !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW5ncmVkaWVudHMvaW5ncmVkaWVudHMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtFQUNBLHFCQUFBO0FBQ0o7O0FBSUk7RUFDSSw2QkFBQTtBQURSIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaW5ncmVkaWVudHMvaW5ncmVkaWVudHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmluZ3JlZGllbnQtY29udGFpbmVye1xuICAgIHdpZHRoOiA1MHZ3O1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbn1cblxuXG4uaW5ncmVkaWVudC1jb250YWluZXIge1xuICAgIGlvbi1jYXJke1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAwcHggIWltcG9ydGFudDsgXG4gICAgfVxufSJdfQ== */\";","import { Component, Input, OnInit, Renderer2 } from '@angular/core';\nimport { IngredientsModel } from \"src/app/models/ingredients.model\";\nimport { DataV2Service } from './../../services/data-v2.service';\nconst LIMIT = 10;\n\n\n@Component({\n  selector: 'app-ingredients',\n  templateUrl: './ingredients.page.html',\n  styleUrls: ['./ingredients.page.scss'],\n})\nexport class IngredientsPage implements OnInit {\n\n  search: string = \"\";\n  constructor(public renderer: Renderer2, public model: IngredientsModel, public dataService: DataV2Service) { }\n\n\n  ngOnInit() {\n    this.loadData();\n  }\n\n  @Input('header') header: any;\n  scrollStart(header) {\n    this.header = header.el\n  }\n\n  lastX: any;\n  logScroll(event) {\n    this.renderer.setStyle(this.header, 'transition', 'margin-top 400ms')\n    if (event.detail.scrollTop > Math.max(0, this.lastX)) {\n      // Hide\n      this.renderer.setStyle(this.header, 'margin-top', `-${this.header.clientHeight}px`)\n    } else {\n      // Show\n      this.renderer.setStyle(this.header, 'margin-top', '0px')\n    }\n\n    this.lastX = event.detail.scrollTop\n  }\n\n  page: number = 1;\n  items: any = [];\n\n  async loadData(infiniteScroll?) {\n    console.log(this.page)\n    let skip = this.page;\n\n    // const items = await this.model.get({ skip: skip, limit: LIMIT, search: this.search.trim() });\n    const items = await this.dataService.getIngredients({ skip: skip, limit: LIMIT, search: this.search.trim() });\n\n    if (skip === 1) {\n      this.items = items;\n    } else {\n      this.items = this.items.concat(items);\n    }\n\n    if (infiniteScroll) {\n      infiniteScroll.target.complete();\n      if (Array.isArray(items) && items.length < LIMIT) {\n        console.log({ infiniteScroll }, 'disable it')\n\n      }\n    }\n  }\n\n  async loadMore(infiniteScroll) {\n    this.page++;\n    await this.loadData(infiniteScroll);\n  }\n\n  onInput($event) {\n    this.page = 1;\n    this.loadData();\n  }\n}\n"]}